<!-- templates/home.html -->
{% extends 'base.html' %}
{% load static %}

{% block content %}
<!-- Hero Section with Wave Pattern -->
<div class="position-relative overflow-hidden">
    <!-- Decorative Wave Background -->
    <div style="position: absolute; top: 0; right: 0; width: 60%; height: 600px; opacity: 0.15; pointer-events: none;">
        <svg viewBox="0 0 800 600" xmlns="http://www.w3.org/2000/svg">
            <path d="M0,100 Q200,50 400,100 T800,100 L800,0 L0,0 Z" fill="url(#gradient1)"/>
            <path d="M0,200 Q200,150 400,200 T800,200 L800,0 L0,0 Z" fill="url(#gradient2)" opacity="0.5"/>
            <defs>
                <linearGradient id="gradient1" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#FF6B35;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#6B35FF;stop-opacity:1" />
                </linearGradient>
                <linearGradient id="gradient2" x1="0%" y1="0%" x2="100%" y2="0%">
                    <stop offset="0%" style="stop-color:#FFB800;stop-opacity:1" />
                    <stop offset="100%" style="stop-color:#FF6B35;stop-opacity:1" />
                </linearGradient>
            </defs>
        </svg>
    </div>

    <div class="container">
        <!-- Hero Section -->
        <div class="row min-vh-100 align-items-center py-5">
            <div class="col-lg-6 pe-lg-5">
                <div class="mb-4">
                    <span class="blackbox-badge mb-4 d-inline-flex">
                        <i class="bi bi-shield-check"></i> PRIVACY-FIRST AI
                    </span>
                    <h1 class="display-2 fw-bold mb-4" style="line-height: 1.1; color: var(--dawn-dark);">
                        Your AI.<br>
                        Your Data.<br>
                        <span class="glow-text">Your Control.</span>
                    </h1>
                    <p class="lead mb-4" style="color: #666; font-size: 1.25rem;">
                        CypherVault is a privacy-first AI assistant that runs entirely on your DAWN Black Box. 
                        No cloud. No tracking. No compromises.
                    </p>
                </div>
                
                <div class="d-flex gap-3 mb-5">
                    {% if user.is_authenticated %}
                        <a href="{% url 'dashboard' %}" class="btn btn-dawn btn-lg">
                            Open Dashboard <i class="bi bi-arrow-right ms-2"></i>
                        </a>
                    {% else %}
                        <a href="{% url 'register' %}" class="btn btn-dawn btn-lg">
                            Get Started <i class="bi bi-arrow-right ms-2"></i>
                        </a>
                        <a href="{% url 'login' %}" class="btn btn-outline-dawn btn-lg">
                            Sign In
                        </a>
                    {% endif %}
                </div>
                
                <!-- Trust Indicators -->
                <div class="row g-3">
                    <div class="col-4">
                        <div class="text-center p-3" style="background: rgba(255,107,53,0.05); border-radius: 16px;">
                            <div class="h2 mb-0 glow-text fw-bold">{{ stats.total_conversations|default:"1K" }}+</div>
                            <small style="color: #666; font-weight: 500;">Conversations</small>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="text-center p-3" style="background: rgba(107,53,255,0.05); border-radius: 16px;">
                            <div class="h2 mb-0 fw-bold" style="color: var(--dawn-purple);">{{ stats.messages_encrypted|default:"10K" }}+</div>
                            <small style="color: #666; font-weight: 500;">Encrypted</small>
                        </div>
                    </div>
                    <div class="col-4">
                        <div class="text-center p-3" style="background: rgba(76,175,80,0.05); border-radius: 16px;">
                            <div class="h2 mb-0 fw-bold" style="color: #4CAF50;">100%</div>
                            <small style="color: #666; font-weight: 500;">Private</small>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-lg-6 ps-lg-5">
                <!-- Black Box Vision Video -->
                <div class="dawn-card position-relative" style="overflow: hidden;">
                    <div class="position-absolute top-0 end-0 m-3" style="z-index: 10;">
                        <span class="badge" style="background: #4CAF50; color: white; padding: 8px 14px; border-radius: 20px; font-weight: 600;">
                            <i class="bi bi-circle-fill" style="font-size: 8px; animation: pulse 2s infinite;"></i> LIVE DEMO
                        </span>
                    </div>
                    
                    <!-- Embed Black Box Vision Video -->
                    <div class="ratio ratio-16x9 mb-3" style="border-radius: 16px; overflow: hidden;">
                        <iframe 
                            src="https://video.twimg.com/amplify_video/1945100411947339776/vid/avc1/1280x720/V-6Cexra9zCrMMgP.mp4?tag=14" 
                            title="DAWN Black Box Vision" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen
                            style="border-radius: 16px;">
                        </iframe>
                    </div>
                    
                    <div class="text-center">
                        <h5 class="fw-bold mb-2" style="color: var(--dawn-dark);">Powered by DAWN Black Box</h5>
                        <p style="color: #666; font-size: 0.95rem;">
                            <i class="bi bi-shield-check" style="color: #4CAF50;"></i> Enterprise-grade privacy in your home
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Features Section - DAWN Style Cards -->
<div style="background: var(--dawn-blue-light); padding: 100px 0;">
    <div class="container">
        <div class="text-center mb-5">
            <span class="blackbox-badge mb-3">WHY CYPHERVAULT</span>
            <h2 class="display-4 fw-bold mb-3" style="color: var(--dawn-dark);">Built for Privacy</h2>
            <p class="lead" style="color: #666;">Powered by your Black Box, protected by design</p>
        </div>
        
        <div class="row g-4">
            <div class="col-md-6 col-lg-4">
                <div class="dawn-card h-100 text-center">
                    <div class="mb-4" style="font-size: 56px;">üîí</div>
                    <h4 class="fw-bold mb-3" style="color: var(--dawn-dark);">End-to-End Encryption</h4>
                    <p style="color: #666;">
                        Every message is encrypted before storage. Not even the server can read your conversations.
                    </p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="dawn-card h-100 text-center">
                    <div class="mb-4" style="font-size: 56px;">üíª</div>
                    <h4 class="fw-bold mb-3" style="color: var(--dawn-dark);">100% Local Processing</h4>
                    <p style="color: #666;">
                        AI runs on your Black Box using Ollama. No cloud APIs, no external servers, no data leaks.
                    </p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="dawn-card h-100 text-center">
                    <div class="mb-4" style="font-size: 56px;">‚ö°</div>
                    <h4 class="fw-bold mb-3" style="color: var(--dawn-dark);">Lightning Fast</h4>
                    <p style="color: #666;">
                        No network latency. Your AI responds instantly because it runs right on your hardware.
                    </p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="dawn-card h-100 text-center">
                    <div class="mb-4" style="font-size: 56px;">üõ°Ô∏è</div>
                    <h4 class="fw-bold mb-3" style="color: var(--dawn-dark);">Zero Data Collection</h4>
                    <p style="color: #666;">
                        We don't collect, store, or analyze your data. Ever. Your privacy is non-negotiable.
                    </p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="dawn-card h-100 text-center">
                    <div class="mb-4" style="font-size: 56px;">üåê</div>
                    <h4 class="fw-bold mb-3" style="color: var(--dawn-dark);">DePIN Ready</h4>
                    <p style="color: #666;">
                        Built for DAWN's Black Box. Earn rewards while maintaining complete data sovereignty.
                    </p>
                </div>
            </div>
            
            <div class="col-md-6 col-lg-4">
                <div class="dawn-card h-100 text-center">
                    <div class="mb-4" style="font-size: 56px;">üîß</div>
                    <h4 class="fw-bold mb-3" style="color: var(--dawn-dark);">Open Source</h4>
                    <p style="color: #666;">
                        Fully auditable code. No black boxes (except the Black Box itself). Trust through transparency.
                    </p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CTA Section -->
<div class="container py-5 my-5">
    <div class="row">
        <div class="col-lg-10 offset-lg-1">
            <div class="dawn-card text-center" style="background: linear-gradient(135deg, rgba(255,107,53,0.05), rgba(107,53,255,0.05)); padding: 80px 40px;">
                <h2 class="display-4 fw-bold mb-4" style="color: var(--dawn-dark);">
                    Ready to take control?
                </h2>
                <p class="lead mb-5" style="color: #666; max-width: 600px; margin: 0 auto;">
                    Join the privacy revolution. Your AI assistant that truly respects your data.
                </p>
                {% if not user.is_authenticated %}
                <a href="{% url 'register' %}" class="btn btn-dawn btn-lg">
                    Start Using CypherVault <i class="bi bi-arrow-right ms-2"></i>
                </a>
                {% else %}
                <a href="{% url 'dashboard' %}" class="btn btn-dawn btn-lg">
                    Go to Dashboard <i class="bi bi-arrow-right ms-2"></i>
                </a>
                {% endif %}
                <div class="mt-4">
                    <small style="color: #999; font-weight: 500;">
                        üê≥ Runs in Docker ‚Ä¢ üîí End-to-End Encrypted ‚Ä¢ ‚ö° No Setup Required
                    </small>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
@keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
}
</style>

<script>
function sendDemoMessage() {
    const input = document.getElementById('demo-input');
    const message = input.value.trim();
    if (!message) return;
    
    const chatDiv = document.getElementById('demo-chat');
    
    // Add user message
    chatDiv.innerHTML += `
        <div class="message-wrapper mb-3">
            <div class="d-flex justify-content-end">
                <div class="message-bubble p-3 rounded-3" style="max-width: 80%; background: linear-gradient(135deg, var(--primary-accent) 0%, #00b8d4 100%); color: #000;">
                    <div class="mb-2">
                        <span class="badge" style="background: rgba(0,0,0,0.2); font-size: 10px;">üë§ You</span>
                    </div>
                    ${escapeHtml(message)}
                </div>
            </div>
        </div>
    `;
    
    input.value = '';
    chatDiv.scrollTop = chatDiv.scrollHeight;
    
    // Simulate AI response
    setTimeout(() => {
        const responses = {
            'different': "Unlike ChatGPT or Claude, I run entirely on YOUR hardware. Your conversations never leave your device, and you maintain complete control over your data. No subscriptions, no data mining, no privacy concerns.",
            'privacy': "Privacy is my core principle. Every message is encrypted end-to-end, processed locally on your Black Box, and never sent to external servers. You own your data, not me.",
            'work': "I use Ollama to run open-source language models directly on your Black Box. All processing happens locally - no internet required for inference. Your data stays in your home.",
            'safe': "Absolutely! With end-to-end encryption, local processing, and open-source code, you can verify exactly how your data is handled. No black boxes, just privacy.",
            'default': "I'm a privacy-first AI assistant running on your DAWN Black Box. I can help with questions, writing, coding, and more - all while keeping your data completely private and local!"
        };
        
        let response = responses['default'];
        const lowerMsg = message.toLowerCase();
        
        for (let key in responses) {
            if (lowerMsg.includes(key)) {
                response = responses[key];
                break;
            }
        }
        
        chatDiv.innerHTML += `
            <div class="message-wrapper mb-3">
                <div class="d-flex">
                    <div class="message-bubble p-3 rounded-3" style="max-width: 80%; background: var(--secondary);">
                        <div class="mb-2">
                            <span class="badge" style="background: rgba(0,0,0,0.2); font-size: 10px;">ü§ñ AI</span>
                        </div>
                        ${response}
                    </div>
                </div>
            </div>
        `;
        
        chatDiv.scrollTop = chatDiv.scrollHeight;
    }, 800);
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

// Enter key support
document.getElementById('demo-input').addEventListener('keypress', (e) => {
    if (e.key === 'Enter') sendDemoMessage();
});
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
{% endblock %}