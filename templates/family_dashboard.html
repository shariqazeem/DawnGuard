{% extends 'base.html' %}
{% load static %}

{% block content %}
<div class="container-fluid py-4" style="background: linear-gradient(135deg, #E8F4FF, #f0e6ff, #FFE5DC); min-height: 100vh; position: relative; overflow: hidden;">
    <!-- Floating Background Elements -->
    <div class="floating-circle" style="position: absolute; top: 10%; left: 5%; width: 100px; height: 100px; background: radial-gradient(circle, rgba(255,107,53,0.1), transparent); border-radius: 50%; animation: float-slow 6s ease-in-out infinite;"></div>
    <div class="floating-circle" style="position: absolute; top: 60%; right: 10%; width: 150px; height: 150px; background: radial-gradient(circle, rgba(107,53,255,0.1), transparent); border-radius: 50%; animation: float-slow 8s ease-in-out infinite 1s;"></div>
    <div class="floating-circle" style="position: absolute; bottom: 20%; left: 15%; width: 80px; height: 80px; background: radial-gradient(circle, rgba(76,175,80,0.1), transparent); border-radius: 50%; animation: float-slow 7s ease-in-out infinite 0.5s;"></div>

    <!-- Welcome Header with Amazing Animation -->
    <div class="row mb-4 animate-slide-down">
        <div class="col-12">
            <div class="welcome-card" style="background: linear-gradient(135deg, rgba(255,107,53,0.15), rgba(107,53,255,0.15)); border-radius: 30px; padding: 32px; box-shadow: 0 10px 40px rgba(107,53,255,0.2); border: 2px solid rgba(107,53,255,0.2); position: relative; overflow: hidden;">
                <!-- Animated gradient overlay -->
                <div style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent); background-size: 200% 200%; animation: gradient-shift 3s ease infinite;"></div>

                <div class="row align-items-center position-relative" style="z-index: 1;">
                    <div class="col-md-8">
                        <div class="d-flex align-items-center mb-2">
                            <span style="font-size: 48px; margin-right: 16px; animation: wave 2s ease-in-out infinite;">üëã</span>
                            <div>
                                <h2 class="mb-1 fw-bold" style="color: var(--dawn-dark); font-size: 2.2rem;">
                                    Welcome Back, {{ family_member.display_name }}!
                                </h2>
                                <p class="mb-0 animate-fade-in" style="color: #555; font-size: 1.1rem; animation-delay: 0.2s;">
                                    <i class="bi bi-house-heart-fill" style="color: var(--dawn-orange);"></i>
                                    Your family's private digital home on the Black Box
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <span class="role-badge animate-bounce-in" style="background: {% if family_member.role == 'admin' %}linear-gradient(135deg, #4CAF50, #66BB6A){% elif family_member.role == 'child' %}linear-gradient(135deg, #FF9800, #FFB74D){% else %}linear-gradient(135deg, #2196F3, #64B5F6){% endif %}; color: white; padding: 12px 24px; font-size: 16px; border-radius: 25px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); display: inline-block; animation-delay: 0.4s;">
                            <i class="bi bi-person-badge"></i> {{ family_member.get_role_display }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Features - 2 Big Animated Cards -->
    <div class="row g-4 mb-4">
        <!-- Family Vault -->
        <div class="col-lg-6">
            <a href="{% url 'vault_home' %}" class="text-decoration-none">
                <div class="feature-card animate-slide-in-left" style="background: white; border-radius: 25px; padding: 28px; box-shadow: 0 10px 40px rgba(255,107,53,0.15); border-left: 6px solid var(--dawn-orange); height: 100%; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden;">
                    <!-- Shine effect on hover -->
                    <div class="shine-effect"></div>

                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-box" style="width: 90px; height: 90px; background: linear-gradient(135deg, var(--dawn-orange), #ff8c5a); border-radius: 22px; display: flex; align-items-center; justify-content: center; box-shadow: 0 8px 20px rgba(255,107,53,0.3); animation: pulse-icon 3s ease-in-out infinite;">
                            <i class="bi bi-shield-lock-fill" style="font-size: 44px; color: white;"></i>
                        </div>
                        <div class="ms-4">
                            <h3 class="mb-1 fw-bold" style="color: var(--dawn-dark); font-size: 1.8rem;">Family Vault</h3>
                            <p class="mb-0 text-muted" style="font-size: 1.05rem;">Your Private Cloud Storage</p>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-6">
                            <div class="stat-box" style="background: linear-gradient(135deg, rgba(255,107,53,0.15), rgba(255,107,53,0.05)); border-radius: 16px; padding: 16px; text-align: center; transition: all 0.3s ease;">
                                <div class="h2 mb-1 fw-bold counter" style="color: var(--dawn-orange);" data-target="{{ total_files }}">0</div>
                                <small class="text-muted" style="font-weight: 600;">Files Stored</small>
                            </div>
                        </div>
                        <div class="col-6">
                            <div class="stat-box" style="background: linear-gradient(135deg, rgba(255,107,53,0.15), rgba(255,107,53,0.05)); border-radius: 16px; padding: 16px; text-align: center; transition: all 0.3s ease;">
                                <div class="h2 mb-1 fw-bold counter" style="color: var(--dawn-orange);" data-target="{{ storage_used_gb }}">0</div>
                                <small class="text-muted" style="font-weight: 600;">GB Used</small>
                            </div>
                        </div>
                    </div>

                    <div class="mb-3">
                        <div class="d-flex justify-content-between mb-2">
                            <small class="text-muted fw-bold">Storage Usage</small>
                            <small class="fw-bold" style="color: var(--dawn-orange);">{{ storage_percentage }}%</small>
                        </div>
                        <div class="progress" style="height: 12px; border-radius: 10px; background: rgba(255,107,53,0.1);">
                            <div class="progress-bar-animated" style="width: 0%; background: linear-gradient(90deg, var(--dawn-orange), #ff8c5a); border-radius: 10px; transition: width 2s ease-out;" data-width="{{ storage_percentage }}"></div>
                        </div>
                    </div>

                    <div class="d-flex justify-content-between align-items-center">
                        <small style="color: #4CAF50; font-weight: 600;">
                            <i class="bi bi-shield-check"></i> Encrypted & Secure
                        </small>
                        <span class="btn btn-dawn btn-sm action-button" style="border-radius: 20px; padding: 10px 20px; font-weight: 600;">
                            Open Vault <i class="bi bi-arrow-right ms-1"></i>
                        </span>
                    </div>
                </div>
            </a>
        </div>

        <!-- Kids-Safe AI -->
        <div class="col-lg-6">
            <a href="{% url 'kids_ai_home' %}" class="text-decoration-none">
                <div class="feature-card animate-slide-in-right" style="background: white; border-radius: 25px; padding: 28px; box-shadow: 0 10px 40px rgba(107,53,255,0.15); border-left: 6px solid var(--dawn-purple); height: 100%; transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); position: relative; overflow: hidden;">
                    <!-- Shine effect on hover -->
                    <div class="shine-effect"></div>

                    <div class="d-flex align-items-center mb-4">
                        <div class="icon-box" style="width: 90px; height: 90px; background: linear-gradient(135deg, var(--dawn-purple), #8b5aff); border-radius: 22px; display: flex; align-items-center; justify-content: center; box-shadow: 0 8px 20px rgba(107,53,255,0.3); animation: pulse-icon 3s ease-in-out infinite 0.5s;">
                            <i class="bi bi-robot" style="font-size: 44px; color: white;"></i>
                        </div>
                        <div class="ms-4">
                            <h3 class="mb-1 fw-bold" style="color: var(--dawn-dark); font-size: 1.8rem;">Kids-Safe AI</h3>
                            <p class="mb-0 text-muted" style="font-size: 1.05rem;">Homework Help & Learning</p>
                        </div>
                    </div>

                    <div class="row g-3 mb-4">
                        <div class="col-12">
                            <div style="background: linear-gradient(135deg, rgba(107,53,255,0.15), rgba(107,53,255,0.05)); border-radius: 16px; padding: 20px;">
                                <div class="d-flex justify-content-around text-center">
                                    <div class="safety-icon" style="animation: float-up 3s ease-in-out infinite;">
                                        <div class="h4 mb-1" style="color: var(--dawn-purple);">
                                            <i class="bi bi-shield-check-fill"></i>
                                        </div>
                                        <small class="text-muted fw-bold">Filtered</small>
                                    </div>
                                    <div class="safety-icon" style="animation: float-up 3s ease-in-out infinite 0.3s;">
                                        <div class="h4 mb-1" style="color: var(--dawn-purple);">
                                            <i class="bi bi-eye-fill"></i>
                                        </div>
                                        <small class="text-muted fw-bold">Monitored</small>
                                    </div>
                                    <div class="safety-icon" style="animation: float-up 3s ease-in-out infinite 0.6s;">
                                        <div class="h4 mb-1" style="color: var(--dawn-purple);">
                                            <i class="bi bi-lock-fill"></i>
                                        </div>
                                        <small class="text-muted fw-bold">Private</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    {% if family_member.ai_chat_enabled %}
                    <div class="alert alert-success mb-3 animate-fade-in" style="border-radius: 16px; border-left: 4px solid #4CAF50; background: linear-gradient(135deg, rgba(76,175,80,0.1), rgba(76,175,80,0.05));">
                        <small class="fw-bold">
                            <i class="bi bi-check-circle-fill"></i> AI Chat Enabled<br>
                            <span class="text-muted">Safe for {% if family_member.role == 'child' %}kids{% else %}your family{% endif %} to use</span>
                        </small>
                    </div>
                    {% else %}
                    <div class="alert alert-warning mb-3 animate-fade-in" style="border-radius: 16px; border-left: 4px solid #FF9800; background: linear-gradient(135deg, rgba(255,152,0,0.1), rgba(255,152,0,0.05));">
                        <small class="fw-bold">
                            <i class="bi bi-exclamation-triangle-fill"></i> AI Chat Disabled<br>
                            <span class="text-muted">Ask a parent to enable it</span>
                        </small>
                    </div>
                    {% endif %}

                    <div class="d-flex justify-content-between align-items-center">
                        <small style="color: #4CAF50; font-weight: 600;">
                            <i class="bi bi-cpu"></i> Runs on Black Box
                        </small>
                        <span class="btn btn-dawn btn-sm action-button" style="border-radius: 20px; padding: 10px 20px; font-weight: 600;">
                            Open AI Tutor <i class="bi bi-arrow-right ms-1"></i>
                        </span>
                    </div>
                </div>
            </a>
        </div>
    </div>

    <!-- Family Members Card with Animation -->
    <div class="row mb-4">
        <div class="col-12">
            <div class="dawn-card animate-fade-in-up" style="border-radius: 25px; box-shadow: 0 8px 30px rgba(0,0,0,0.08); animation-delay: 0.4s;">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h4 class="mb-0 fw-bold" style="color: var(--dawn-dark); font-size: 1.6rem;">
                        <span style="font-size: 32px; margin-right: 8px;">üë®‚Äçüë©‚Äçüëß‚Äçüë¶</span>
                        Family Members ({{ all_family_members.count }})
                    </h4>
                    {% if family_member.role == 'admin' %}
                    <a href="{% url 'vault_family_settings' %}" class="btn btn-outline-dawn btn-sm" style="border-radius: 20px; padding: 10px 20px; font-weight: 600; transition: all 0.3s ease;">
                        <i class="bi bi-gear"></i> Manage Family
                    </a>
                    {% endif %}
                </div>
                <div class="row g-3">
                    {% for member in all_family_members %}
                    <div class="col-md-4">
                        <div class="member-card" style="background: linear-gradient(135deg, rgba({{ member.avatar_color|slice:'1:' }}, 0.05), white); border-radius: 18px; padding: 20px; border-left: 4px solid {{ member.avatar_color }}; transition: all 0.3s ease; animation: slide-in-stagger 0.5s ease-out both; animation-delay: {{ forloop.counter0|add:'0.1' }}s;">
                            <div class="d-flex align-items-center">
                                <div class="member-avatar" style="width: 60px; height: 60px; border-radius: 50%; background: {{ member.avatar_color }}; display: flex; align-items-center; justify-content: center; color: white; font-weight: bold; font-size: 24px; box-shadow: 0 4px 15px rgba(0,0,0,0.2); animation: pulse-subtle 3s ease-in-out infinite;">
                                    {{ member.display_name.0 }}
                                </div>
                                <div class="ms-3 flex-fill">
                                    <div class="fw-bold" style="font-size: 1.1rem; color: var(--dawn-dark);">{{ member.display_name }}</div>
                                    <small class="text-muted fw-bold">{{ member.get_role_display }}</small>
                                    <div class="mt-1">
                                        <div class="progress" style="height: 4px; border-radius: 10px; background: rgba(0,0,0,0.05);">
                                            <div class="progress-bar" style="width: {{ member.get_storage_percentage }}%; background: {{ member.avatar_color }};"></div>
                                        </div>
                                        <small style="color: var(--dawn-orange); font-weight: 600;">
                                            {{ member.get_storage_used_gb|floatformat:1 }} / {{ member.storage_quota_gb }} GB
                                        </small>
                                    </div>
                                </div>
                                {% if member == family_member %}
                                <span class="badge bg-success" style="border-radius: 15px; padding: 6px 12px; animation: pulse-subtle 2s ease-in-out infinite;">You</span>
                                {% endif %}
                            </div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <!-- Advanced Features -->
    <div class="row mb-4 g-4">
        <div class="col-12">
            <h4 class="mb-3 fw-bold" style="color: var(--dawn-dark); font-size: 1.6rem;">
                <span style="font-size: 28px; margin-right: 8px;">‚ö°</span>
                Advanced Features
            </h4>
        </div>

        <!-- AI Guardian Alerts - NEW! -->
        <div class="col-md-4">
            <a href="{% url 'guardian_alerts' %}" class="text-decoration-none">
                <div class="feature-mini-card" style="background: white; border-radius: 20px; padding: 24px; border-left: 4px solid #FF9800; transition: all 0.3s ease; height: 100%; position: relative;">
                    <span class="badge bg-danger" style="position: absolute; top: 10px; right: 10px; font-size: 0.7rem;">NEW!</span>
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #FF9800, #FFB74D); border-radius: 16px; display: flex; align-items: center; justify-content: center; animation: pulse-alert 2s ease-in-out infinite;">
                            <i class="bi bi-shield-fill-exclamation" style="font-size: 28px; color: white;"></i>
                        </div>
                        <div class="ms-3">
                            <h6 class="mb-0 fw-bold" style="color: var(--dawn-dark);">AI Guardian</h6>
                            <small class="text-muted">Content Protection</small>
                        </div>
                    </div>
                    <p class="mb-0" style="color: #666; font-size: 0.9rem;">
                        Local AI scans uploads for privacy & safety
                    </p>
                </div>
            </a>
        </div>

        <!-- Black Box Hardware -->
        <div class="col-md-4">
            <a href="{% url 'blackbox_dashboard' %}" class="text-decoration-none">
                <div class="feature-mini-card" style="background: white; border-radius: 20px; padding: 24px; border-left: 4px solid var(--dawn-orange); transition: all 0.3s ease; height: 100%;">
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--dawn-orange), #ff8c5a); border-radius: 16px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-hdd-rack" style="font-size: 28px; color: white;"></i>
                        </div>
                        <div class="ms-3">
                            <h6 class="mb-0 fw-bold" style="color: var(--dawn-dark);">Black Box</h6>
                            <small class="text-muted">Hardware Monitor</small>
                        </div>
                    </div>
                    <p class="mb-0" style="color: #666; font-size: 0.9rem;">
                        Real-time CPU, memory, disk usage monitoring
                    </p>
                </div>
            </a>
        </div>

        <!-- Zero-Knowledge Proofs -->
        <div class="col-md-4">
            <a href="{% url 'setup_zkp_view' %}" class="text-decoration-none">
                <div class="feature-mini-card" style="background: white; border-radius: 20px; padding: 24px; border-left: 4px solid var(--dawn-purple); transition: all 0.3s ease; height: 100%;">
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, var(--dawn-purple), #8b5aff); border-radius: 16px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-shield-lock" style="font-size: 28px; color: white;"></i>
                        </div>
                        <div class="ms-3">
                            <h6 class="mb-0 fw-bold" style="color: var(--dawn-dark);">ZK Proofs</h6>
                            <small class="text-muted">Advanced Auth</small>
                        </div>
                    </div>
                    <p class="mb-0" style="color: #666; font-size: 0.9rem;">
                        Zero-knowledge proof authentication setup
                    </p>
                </div>
            </a>
        </div>

        <!-- Family Memory - NEW! -->
        <div class="col-md-4">
            <a href="{% url 'memory_home' %}" class="text-decoration-none">
                <div class="feature-mini-card" style="background: white; border-radius: 20px; padding: 24px; border-left: 4px solid #9C27B0; transition: all 0.3s ease; height: 100%; position: relative;">
                    <span class="badge bg-danger" style="position: absolute; top: 10px; right: 10px; font-size: 0.7rem;">NEW!</span>
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #9C27B0, #E91E63); border-radius: 16px; display: flex; align-items-center; justify-content: center;">
                            <i class="bi bi-journal-heart" style="font-size: 28px; color: white;"></i>
                        </div>
                        <div class="ms-3">
                            <h6 class="mb-0 fw-bold" style="color: var(--dawn-dark);">Family Memory</h6>
                            <small class="text-muted">Digital Journal</small>
                        </div>
                    </div>
                    <p class="mb-0" style="color: #666; font-size: 0.9rem;">
                        Encrypted journal with AI weekly summaries
                    </p>
                </div>
            </a>
        </div>

        <!-- P2P Network -->
        <div class="col-md-4">
            <a href="{% url 'p2p_network' %}" class="text-decoration-none">
                <div class="feature-mini-card" style="background: white; border-radius: 20px; padding: 24px; border-left: 4px solid #4CAF50; transition: all 0.3s ease; height: 100%;">
                    <div class="d-flex align-items-center mb-3">
                        <div style="width: 60px; height: 60px; background: linear-gradient(135deg, #4CAF50, #66BB6A); border-radius: 16px; display: flex; align-items: center; justify-content: center;">
                            <i class="bi bi-diagram-3" style="font-size: 28px; color: white;"></i>
                        </div>
                        <div class="ms-3">
                            <h6 class="mb-0 fw-bold" style="color: var(--dawn-dark);">P2P Network</h6>
                            <small class="text-muted">Mesh Sharing</small>
                        </div>
                    </div>
                    <p class="mb-0" style="color: #666; font-size: 0.9rem;">
                        Share knowledge on decentralized network
                    </p>
                </div>
            </a>
        </div>
    </div>

    <!-- Value Proposition with Pulsing Animation -->
    <div class="row">
        <div class="col-12">
            <div class="savings-card animate-fade-in-up" style="background: linear-gradient(135deg, rgba(76,175,80,0.15), rgba(33,150,243,0.1)); border-radius: 25px; padding: 32px; box-shadow: 0 8px 30px rgba(76,175,80,0.2); border: 2px solid rgba(76,175,80,0.3); animation-delay: 0.6s;">
                <div class="row align-items-center">
                    <div class="col-md-8">
                        <div class="d-flex align-items-center mb-2">
                            <span style="font-size: 40px; margin-right: 12px; animation: coin-flip 2s ease-in-out infinite;">üí∞</span>
                            <div>
                                <h5 class="mb-2 fw-bold" style="color: var(--dawn-dark); font-size: 1.5rem;">
                                    You're Saving Money Every Month!
                                </h5>
                                <p class="mb-0" style="color: #555; font-size: 1.05rem;">
                                    Dropbox costs <del>$20/month</del>. ChatGPT Plus costs <del>$20/month</del>.<br>
                                    <strong style="color: #4CAF50;">You're paying $0/month with HomeGuardian AI!</strong>
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 text-md-end mt-3 mt-md-0">
                        <div class="savings-amount" style="background: linear-gradient(135deg, #4CAF50, #66BB6A); color: white; border-radius: 20px; padding: 20px; box-shadow: 0 6px 20px rgba(76,175,80,0.3); animation: pulse-savings 2s ease-in-out infinite;">
                            <div class="display-4 fw-bold mb-0">$480</div>
                            <small style="font-size: 1.1rem; font-weight: 600;">Annual Savings</small>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* =============== AMAZING ANIMATIONS =============== */

@keyframes float-slow {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
}

@keyframes wave {
    0%, 100% { transform: rotate(0deg); }
    25% { transform: rotate(20deg); }
    75% { transform: rotate(-10deg); }
}

@keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
}

@keyframes pulse-icon {
    0%, 100% { transform: scale(1); box-shadow: 0 8px 20px rgba(255,107,53,0.3); }
    50% { transform: scale(1.05); box-shadow: 0 12px 30px rgba(255,107,53,0.5); }
}

@keyframes float-up {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-8px); }
}

@keyframes coin-flip {
    0%, 100% { transform: rotateY(0deg); }
    50% { transform: rotateY(180deg); }
}

@keyframes pulse-savings {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.05); }
}

@keyframes pulse-subtle {
    0%, 100% { transform: scale(1); }
    50% { transform: scale(1.02); }
}

@keyframes slide-in-stagger {
    from {
        opacity: 0;
        transform: translateX(-30px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes animate-slide-down {
    from {
        opacity: 0;
        transform: translateY(-30px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes animate-slide-in-left {
    from {
        opacity: 0;
        transform: translateX(-40px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes animate-slide-in-right {
    from {
        opacity: 0;
        transform: translateX(40px);
    }
    to {
        opacity: 1;
        transform: translateX(0);
    }
}

@keyframes animate-fade-in-up {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.animate-slide-down {
    animation: animate-slide-down 0.6s ease-out both;
}

.animate-slide-in-left {
    animation: animate-slide-in-left 0.6s ease-out both;
    animation-delay: 0.2s;
}

.animate-slide-in-right {
    animation: animate-slide-in-right 0.6s ease-out both;
    animation-delay: 0.3s;
}

.animate-fade-in-up {
    animation: animate-fade-in-up 0.6s ease-out both;
}

.animate-fade-in {
    animation: fadeIn 0.5s ease-out both;
}

.animate-bounce-in {
    animation: bounceIn 0.6s ease-out both;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

@keyframes bounceIn {
    0% {
        opacity: 0;
        transform: scale(0.3);
    }
    50% {
        opacity: 1;
        transform: scale(1.05);
    }
    70% {
        transform: scale(0.9);
    }
    100% {
        transform: scale(1);
    }
}

/* Hover Effects */
.feature-card:hover {
    transform: translateY(-10px) scale(1.02);
    box-shadow: 0 20px 60px rgba(107,53,255,0.25) !important;
}

.member-card:hover {
    transform: translateX(8px);
    box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.stat-box:hover {
    transform: scale(1.05);
}

.action-button:hover {
    transform: scale(1.05);
}

/* Shine Effect */
.shine-effect {
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.5s ease;
}

.feature-card:hover .shine-effect {
    left: 100%;
}

/* Counter Animation */
.counter {
    display: inline-block;
}

/* Feature Mini Cards Hover */
.feature-mini-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 40px rgba(0,0,0,0.15) !important;
}

@keyframes pulse-alert {
    0%, 100% {
        transform: scale(1);
        box-shadow: 0 0 0 0 rgba(255,152,0,0.7);
    }
    50% {
        transform: scale(1.05);
        box-shadow: 0 0 0 10px rgba(255,152,0,0);
    }
}

/* Responsive */
@media (max-width: 768px) {
    .feature-card, .welcome-card, .savings-card {
        padding: 20px !important;
    }

    .icon-box {
        width: 70px !important;
        height: 70px !important;
    }

    .feature-mini-card {
        margin-bottom: 16px;
    }
}
</style>

<script>
// Animated Counter
document.addEventListener('DOMContentLoaded', function() {
    const counters = document.querySelectorAll('.counter');

    counters.forEach(counter => {
        const target = parseInt(counter.getAttribute('data-target'));
        const duration = 2000;
        const increment = target / (duration / 16);
        let current = 0;

        const timer = setInterval(() => {
            current += increment;
            if (current >= target) {
                counter.textContent = target;
                clearInterval(timer);
            } else {
                counter.textContent = Math.floor(current);
            }
        }, 16);
    });

    // Animate progress bars
    setTimeout(() => {
        document.querySelectorAll('.progress-bar-animated').forEach(bar => {
            const width = bar.getAttribute('data-width');
            bar.style.width = width + '%';
        });
    }, 500);
});
</script>
{% endblock %}
